<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			body{
				background-color: #000;
			}
			div{
				width: 8px;
				height: 8px;
				position: absolute;
			}
			#p3{
				width: 100%;
				height: 100%;
				font-size: 80px;
				color: #FF0000;
				margin: 300px auto;
				text-align: center;
				display: none;
			}
		</style>
	</head>
	<body>
		<h1 id="p3">刘美美 生日快乐呦</h1>
		<script type="text/javascript">
			var p=document.getElementById("p3");
			//为窗口添加点击事件
			document.onclick=function(e){
				p.style.display="block";
				
				e=e||window.event;
				//点击时在页面创建100个div
				for(var i=0;i<100;i++){
					var div=document.createElement("div");
					//div的背景色为随机颜色
					div.style.backgroundColor=randomColor();
//					console.log(div.style.backgroundColor)
					document.body.appendChild(div);
					div.style.left=e.clientX+"px";
					div.style.top=e.clientY+"px";
					div.className="div";
				
                   move(div);
				}
			}
			function move(Div){
			var i = 3;
				//三目运算符随机移动方向，概率50%,为1时往正方向移动，负1时往反方向移动第二个随机数随机速度快慢
                   var speedX = (parseInt(Math.random()*2) == 0 ? 1 : -1)*parseInt(Math.random()*16 + 1);
                   var speedY = (parseInt(Math.random()*2) == 0 ? 1 : -1)*parseInt(Math.random()*20 + 1);
                   console.log(speedY,Div.style.top,speedY+Div.offsetTop);
                   
                   
            var time1=setInterval(function(){
                i++;
                Div.style.left=Div.offsetLeft+speedX+"px";
                Div.style.top=Div.offsetTop+speedY+i+"px";   //当i+speedY>0时,烟花朝下运动。
                
                if(Div.offsetLeft+Div.offsetWidth>window.innerWidth|| Div.offsetLeft<2 || Div.offsetTop+Div.offsetHeight>window.innerHeight || Div.offsetTop<2 ){
                    Div.remove();       //移动出可视区域记得删除div和清除定时器
                    clearInterval(time1);
                }
            },30);	
			}
			//随机颜色
			function randomColor(){				
			var str="#";
          for(var i=0;i<3;i++){
          var col=Math.floor(Math.random()*256).toString(16);
		  console.log(col);
          if(col.length<2){
            col=0+"col";
          }
           str+=col;
        }
         return str;
				
				
			}
		
		</script>
	</body>
	
</html>
